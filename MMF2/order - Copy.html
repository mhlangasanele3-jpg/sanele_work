<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order Your Cake - CakeDelight</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>
  <style>
    /* (your existing styles remain unchanged - keeping it short here) */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Roboto',sans-serif; background:#fffaf8; color:#333; line-height:1.6; }
    header { display:flex; justify-content:space-between; align-items:center; padding:20px 5%; background:#fff; position:sticky; top:0; z-index:1000; box-shadow:0 4px 20px rgba(0,0,0,0.1); }
    .logo { font-size:1.8rem; font-weight:bold; color:#f15a29; }
    nav a { margin:0 15px; text-decoration:none; color:#333; font-weight:500; }
    nav a:hover { color:#f15a29; }
    .container { max-width:900px; margin:60px auto; padding:20px; }
    .card { background:#fff; padding:50px; border-radius:20px; box-shadow:0 10px 30px rgba(241,90,41,0.15); }
    h1 { font-size:2.8rem; color:#f15a29; text-align:center; margin-bottom:30px; }
    label { display:block; margin:15px 0 8px; font-weight:500; color:#444; }
    input, select, textarea { width:100%; padding:14px; border:1px solid #ddd; border-radius:10px; font-family:inherit; font-size:1rem; }
    input:focus, select:focus, textarea:focus { border-color:#f15a29; outline:none; box-shadow:0 0 0 3px rgba(241,90,41,0.1); }
    .form-row { display:flex; gap:20px; margin-bottom:20px; }
    .form-row > div { flex:1; }
    .btn { background:#f15a29; color:#fff; padding:16px 40px; border:none; border-radius:50px; cursor:pointer; font-size:1.2rem; margin:30px auto 0; display:block; width:300px; }
    .btn:hover { background:#e04a1e; }
    .total { text-align:center; font-size:1.8rem; font-weight:bold; color:#f15a29; margin:30px 0; padding:20px; background:#fff5f0; border-radius:15px; }
    #image-preview { max-width:100%; max-height:350px; margin:20px auto; border-radius:15px; display:none; box-shadow:0 6px 20px rgba(0,0,0,0.1); border:3px solid #f15a29; }
    .section-title { font-size:1.4rem; font-weight:600; color:#f15a29; margin:40px 0 20px; text-align:center; background:#fff5f0; padding:15px; border-radius:12px; }
    @media(max-width:768px){ .form-row{flex-direction:column;} .btn{width:100%;} .card{padding:30px;} h1{font-size:2.3rem;} .section-title{font-size:1.2rem;} }
  </style>
</head>
<body>

<header>
  <div class="logo">CakeDelight</div>
  <nav>
    <a href="home1.html">Home</a>
    <a href="order.html">Order</a>
    <a href="about us.html">About Us</a>

  </nav>
</header>

<div class="container">
  <div class="card">
    <h1>Order Your Perfect Cake</h1>
    <p style="text-align:center; margin-bottom:40px; color:#666;">
      Price depends on <strong>size</strong> and <strong>style</strong> — Premium Exclusive & Love Box have higher base rates due to extra decoration & time
    </p>

    <form id="orderForm">

      <!-- Your existing form fields (name, email, phone, etc.) remain the same -->

      <div class="form-row">
        <div><label>Full Name *</label><input type="text" id="name" required></div>
        <div><label>Email *</label><input type="email" id="email" required></div>
      </div>

      <div class="form-row">
        <div><label>Phone Number *</label><input type="tel" id="phone" pattern="[0-9]{10}" placeholder="e.g. 0795005677" required></div>
        <div><label>Delivery Date *</label><input type="date" id="delivery-date" required></div>
      </div>

      <label>Delivery Address *</label>
      <input type="text" id="delivery-address" placeholder="123 Sweet Street, Cape Town" required>

      <div class="section-title">Step 1: Choose Cake Size</div>
      <label>Cake Size *</label>
      <select id="cake-size" required>
        <option disabled selected>Select size</option>
        <option value="small">Small (4-6 people)</option>
        <option value="medium">Medium (8-10 people)</option>
        <option value="large">Large (12-16 people)</option>
      </select>

      <div class="section-title">Step 2: Choose Cake Style</div>
      <label>Cake Style *</label>
      <select id="cake-style" required>
        <option disabled selected>Select style</option>
        <option value="premium">Premium Exclusive (fancy & decorated)</option>
        <option value="lovebox">Love Box Gift</option>
        <option value="classic">Classic & Simple (minimalist)</option>
      </select>

      <!-- Rest of your form (flavor, shape, tiers, cupcakes, frosting, message, photo) stays the same -->

      <div class="section-title">Step 3: Choose Flavor</div>
      <label>Flavor *</label>
      <select id="cake-flavor" required disabled>
        <option value="">First select a style above</option>
      </select>

      <div class="form-row">
        <div>
          <label>Shape *</label>
          <select id="cake-shape" required>
            <option disabled selected>Select shape</option>
            <option value="Round">Round</option>
            <option value="Heart">Heart</option>
            <option value="Rectangle">Rectangle</option>
          </select>
        </div>
        <div id="tier-section" style="display:none;">
          <label>Number of Tiers (Round only)</label>
          <select id="cake-tiers">
            <option value="1">1 Tier</option>
            <option value="2">2 Tiers (+R350)</option>
            <option value="3">3 Tiers (+R550)</option>
          </select>
        </div>
      </div>

      <label>Cupcake Treat (Optional)</label>
      <select id="cupcake-add">
        <option value="0">No cupcakes</option>
        <option value="6">+6 Cupcakes (+R35)</option>
        <option value="12">+12 Cupcakes (+R65)</option>
        <option value="24">+24 Cupcakes (+R120)</option>
      </select>

      <label style="display:flex; align-items:center; gap:10px; margin-top:20px;">
        <input type="checkbox" id="extra-frosting"> Extra Frosting (+R80)
      </label>

      <label>Message on Cake / Special Requests</label>
      <textarea id="custom-message" rows="4" placeholder="e.g. Happy Birthday Sarah! Add roses and sprinkles"></textarea>

      <label>Reference Photo (Optional)</label>
      <input type="file" id="image" accept="image/*">
      <img id="image-preview" alt="Preview of your reference photo">

      <div class="total" id="total-display">Total: R0</div>

      <button type="submit" class="btn">Place Order</button>
    </form>
  </div>
</div>

<script>
// ──────────────────────────────────────────────────────────────────────────────
//  UPDATED PRICING - Different base prices per STYLE + SIZE
// ──────────────────────────────────────────────────────────────────────────────
const prices = {
  classic:  { small: 400,  medium: 600,  large: 800  },
  premium:  { small: 720,  medium: 980,  large: 1280 },   // Premium is noticeably more expensive
  lovebox:  { small: 550,  medium: 780,  large: 1050 }    // Love Box in between
};

const tierPrices = { 1: 0, 2: 350, 3: 550 };
const cupcakePrices = { 0: 0, 6: 35, 12: 65, 24: 120 };
const extraFrostingPrice = 80;

// Flavors by style (unchanged)
const flavors = {
  premium: [
    "Sweetheart", "Blackforest", "Chocolate Dream", 
    "Vanilla Bliss", "Red Velvet", "Lemon Zest"
  ],
  lovebox: ["Love Box Variety", "Platter Box"],
  classic: [
    "Classic Vanilla", "Simple Chocolate", 
    "Plain Red Velvet", "Elegant White Tiered"
  ]
};

function updateTotal() {
  const size = document.getElementById('cake-size').value;
  const style = document.getElementById('cake-style').value;

  let base = 0;
  if (style && size && prices[style]) {
    base = prices[style][size] || 0;
  }

  const shape = document.getElementById('cake-shape').value || "Round";
  const tiers = (shape === "Round") ? parseInt(document.getElementById('cake-tiers').value || 1) : 1;
  const cupcakes = parseInt(document.getElementById('cupcake-add').value || 0);
  const frosting = document.getElementById('extra-frosting').checked ? extraFrostingPrice : 0;

  const total = base + tierPrices[tiers] + cupcakePrices[cupcakes] + frosting;

  document.getElementById('total-display').textContent = `Total: R${total}`;
}

// ──────────────────────────────────────────────────────────────────────────────
//  Rest of your script remains almost identical
// ──────────────────────────────────────────────────────────────────────────────

// Populate flavors when style changes
document.getElementById('cake-style').addEventListener('change', function() {
  const style = this.value;
  const flavorSelect = document.getElementById('cake-flavor');
  flavorSelect.innerHTML = '<option disabled selected>Select flavor</option>';
  flavorSelect.disabled = !style;

  if (style && flavors[style]) {
    flavors[style].forEach(flavor => {
      const option = document.createElement('option');
      option.value = flavor;
      option.textContent = flavor;
      flavorSelect.appendChild(option);
    });
  }
  flavorSelect.required = !!style;
  updateTotal(); // Update price when style changes
});

// Show/hide tiers
document.getElementById('cake-shape').addEventListener('change', function() {
  document.getElementById('tier-section').style.display = this.value === "Round" ? "block" : "none";
  updateTotal();
});

// Image preview
document.getElementById('image').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(ev) {
      const img = document.getElementById('image-preview');
      img.src = ev.target.result;
      img.style.display = 'block';
    };
    reader.readAsDataURL(file);
  } else {
    document.getElementById('image-preview').style.display = 'none';
  }
});

// Update total on relevant changes
['cake-size', 'cake-style', 'cake-tiers', 'cupcake-add', 'extra-frosting', 'cake-shape']
  .forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener('change', updateTotal);
  });

// Initial update
updateTotal();

// Form submission (unchanged except total calculation uses new base)
document.getElementById('orderForm').addEventListener('submit', function(e) {
  e.preventDefault();

  if (!document.getElementById('cake-flavor').value) {
    alert('Please select a flavor.');
    return;
  }

  const size = document.getElementById('cake-size').value;
  const style = document.getElementById('cake-style').value;
  const shape = document.getElementById('cake-shape').value;
  const tiers = (shape === "Round") ? document.getElementById('cake-tiers').value : "1";

  const base = prices[style]?.[size] || 0;
  const total = 
    base +
    tierPrices[tiers] +
    cupcakePrices[document.getElementById('cupcake-add').value] +
    (document.getElementById('extra-frosting').checked ? extraFrostingPrice : 0);

  // ... rest of your submission code remains exactly the same ...
  const params = new URLSearchParams();
  params.set('order_number', 'CD' + Date.now().toString().slice(-6));
  // ... (all other params)
  params.set('total', 'R' + total);
  // ... image and redirect ...
  window.location.href = 'confem.html?' + params.toString();
});

// Min delivery date (unchanged)
const today = new Date();
today.setDate(today.getDate() + 2);
document.getElementById('delivery-date').min = today.toISOString().split('T')[0];
</script>

</body>
</html>