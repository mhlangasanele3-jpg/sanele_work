<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order Your Cake - CakeDelight</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Roboto',sans-serif; background:#fffaf8; color:#333; line-height:1.6; }
    header { display:flex; justify-content:space-between; align-items:center; padding:20px 5%; background:#fff; position:sticky; top:0; z-index:1000; box-shadow:0 4px 20px rgba(0,0,0,0.1); }
    .logo { font-size:1.8rem; font-weight:bold; color:#f15a29; }
    nav a { margin:0 15px; text-decoration:none; color:#333; font-weight:500; }
    nav a:hover { color:#f15a29; }
    .container { max-width:900px; margin:60px auto; padding:20px; }
    .card { background:#fff; padding:50px; border-radius:20px; box-shadow:0 10px 30px rgba(241,90,41,0.15); }
    h1 { font-size:2.8rem; color:#f15a29; text-align:center; margin-bottom:30px; }
    label { display:block; margin:15px 0 8px; font-weight:500; color:#444; }
    input, select, textarea { width:100%; padding:14px; border:1px solid #ddd; border-radius:10px; font-family:inherit; font-size:1rem; }
    input:focus, select:focus, textarea:focus { border-color:#f15a29; outline:none; box-shadow:0 0 0 3px rgba(241,90,41,0.1); }
    .form-row { display:flex; gap:20px; margin-bottom:20px; }
    .form-row > div { flex:1; }
    .btn { background:#f15a29; color:#fff; padding:16px 40px; border:none; border-radius:50px; cursor:pointer; font-size:1.2rem; margin:30px auto 0; display:block; width:300px; }
    .btn:hover { background:#e04a1e; }
    .total { text-align:center; font-size:1.8rem; font-weight:bold; color:#f15a29; margin:30px 0; padding:20px; background:#fff5f0; border-radius:15px; }
    #image-preview { max-width:100%; max-height:350px; margin:20px auto; border-radius:15px; display:none; box-shadow:0 6px 20px rgba(0,0,0,0.1); border:3px solid #f15a29; }
    .section-title { font-size:1.3rem; font-weight:600; color:#f15a29; margin:30px 0 15px; text-align:center; }
    optgroup { font-style:normal; font-weight:600; color:#f15a29; }
    @media(max-width:768px){ 
      .form-row{flex-direction:column;} 
      .btn{width:100%;}
      .card{padding:30px;}
      h1{font-size:2.3rem;}
    }
  </style>
</head>
<body>

<header>
  <div class="logo">CakeDelight</div>
  <nav>
    <a href="home.html">Home</a>
    <a href="order.html">Order</a>
    <a href="obout us.html">About Us</a>
    <a href="contact.html">Contact</a>
  </nav>
</header>

<div class="container">
  <div class="card">
    <h1>Order Your Perfect Cake</h1>
    <p style="text-align:center; margin-bottom:30px; color:#666;">Choose from our premium, classic, or special gift boxes â€” baked fresh with love!</p>

    <form id="orderForm">

      <div class="form-row">
        <div><label>Full Name *</label><input type="text" id="name" required></div>
        <div><label>Email *</label><input type="email" id="email" required></div>
      </div>

      <div class="form-row">
        <div><label>Phone Number *</label><input type="tel" id="phone" pattern="[0-9]{10}" placeholder="e.g. 0795005677" required></div>
        <div><label>Delivery Date *</label><input type="date" id="delivery-date" required></div>
      </div>

      <label>Delivery Address *</label>
      <input type="text" id="delivery-address" placeholder="123 Sweet Street, Cape Town" required>

      <div class="section-title">Choose Your Cake or Gift</div>

      <label>Cake / Gift Type *</label>
      <select id="cake-type" required>
        <option disabled selected>Select an option</option>
        
        <optgroup label="Premium Exclusive Cakes">
          <option value="Sweetheart">Sweetheart - R250</option>
          <option value="Blackforest">Blackforest - R300</option>
          <option value="Chocolate Dream">Chocolate Dream - R220</option>
          <option value="Vanilla Bliss">Vanilla Bliss - R250</option>
          <option value="Red Velvet">Red Velvet - R300</option>
          <option value="Lemon Zest">Lemon Zest - R250</option>
        </optgroup>
        
        <optgroup label="Love Box Gift">
          <option value="Love Box">Love Box Variety - R150</option>
		  <option value="platter Box">platter Box Variety of cake slice - R850</option>
		
        </optgroup>
        
        <optgroup label="Classic & Simple Cakes">
          <option value="Classic Vanilla">Classic Vanilla - R180</option>
          <option value="Simple Chocolate">Simple Chocolate - R200</option>
          <option value="Plain Red Velvet">Plain Red Velvet - R220</option>
          <option value="Elegant White Tiered">Elegant White Tiered - R350</option>
        </optgroup>
      </select>

      <!-- The rest of the form remains the same -->
      <div class="form-row">
        <div>
          <label>Size *</label>
          <select id="cake-size" required>
            <option disabled selected>Select size</option>
            <option value="small">Small (4-6 people) +R0</option>
            <option value="medium">Medium (8-10) +R50</option>
            <option value="large">Large (12-16) +R100</option>
          </select>
        </div>
        <div>
          <label>Shape *</label>
          <select id="cake-shape" required>
            <option disabled selected>Select shape</option>
            <option value="Round">Round</option>
            <option value="Heart">Heart</option>
            <option value="Rectangle">Rectangle</option>
          </select>
        </div>
      </div>

      <div id="tier-section" style="display:none;">
        <label>Number of Tiers (Round cakes only)</label>
        <select id="cake-tiers">
          <option value="1">1 Tier</option>
          <option value="2">2 Tiers (+R80)</option>
          <option value="3">3 Tiers (+R150)</option>
        </select>
      </div>

      <label>Cupcake Treat (Optional Add-on)</label>
      <select id="cupcake-add">
        <option value="0">No cupcakes</option>
        <option value="6">6 Cupcakes - R35</option>
        <option value="12">12 Cupcakes - R65</option>
        <option value="24">24 Cupcakes - R120</option>
      </select>

      <label style="display:flex; align-items:center; gap:10px;">
        <input type="checkbox" id="extra-frosting"> Extra Frosting (+R20)
      </label>

      <label>Message on Cake / Special Requests</label>
      <textarea id="custom-message" rows="4" placeholder="e.g. Happy Birthday Sarah! Add roses and sprinkles"></textarea>

      <label>Reference Photo (Optional)</label>
      <input type="file" id="image" accept="image/*">
      <img id="image-preview" alt="Preview of uploaded reference photo">

      <div class="total" id="total-display">Total: R0</div>

      <button type="submit" class="btn">Place Order</button>
    </form>
  </div>
</div>

<script>
  // Prices (Love Box kept at R150)
  const prices = { 
    "Sweetheart":250, 
    "Blackforest":300, 
    "Chocolate Dream":220, 
    "Vanilla Bliss":250, 
    "Red Velvet":300, 
    "Lemon Zest":250, 
    "Love Box":150,
    "Classic Vanilla":180,
    "Simple Chocolate":200,
    "Plain Red Velvet":220,
    "Elegant White Tiered":350,
	"platter";850
  };

  const sizeBonus = { small:400, medium:600, large:800 };
  const tierPrices = { 1:0, 2:350, 3:550 };
  const cupcakePrices = { 0:0, 6:35, 12:65, 24:120 };

  function updateTotal() {
    const type = document.getElementById('cake-type').value || "";
    const size = document.getElementById('cake-size').value || "small";
    const shape = document.getElementById('cake-shape').value || "Round";
    const tiers = (shape === "Round") ? parseInt(document.getElementById('cake-tiers').value || 1) : 1;
    const frosting = document.getElementById('extra-frosting').checked ? 20 : 0;
    const cupcakes = parseInt(document.getElementById('cupcake-add').value || 0);

    const total = 
      (prices[type] || 0) +
      sizeBonus[size] +
      tierPrices[tiers] +
      frosting +
      cupcakePrices[cupcakes];

    document.getElementById('total-display').textContent = `Total: R${total}`;
  }

  ['cake-type','cake-size','cake-shape','cake-tiers','extra-frosting','cupcake-add'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener('change', updateTotal);
  });

  document.getElementById('cake-shape').addEventListener('change', function() {
    const section = document.getElementById('tier-section');
    section.style.display = this.value === "Round" ? "block" : "none";
    updateTotal();
  });

  document.getElementById('image').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(ev) {
        const img = document.getElementById('image-preview');
        img.src = ev.target.result;
        img.style.display = 'block';
      };
      reader.readAsDataURL(file);
    }
  });

  document.getElementById('orderForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const params = new URLSearchParams();
    params.set('order_number', 'CD' + Date.now().toString().slice(-6));
    params.set('name', document.getElementById('name').value.trim());
    params.set('email', document.getElementById('email').value.trim());
    params.set('phone', document.getElementById('phone').value.trim());
    params.set('delivery_date', document.getElementById('delivery-date').value);
    params.set('delivery_address', document.getElementById('delivery-address').value.trim());
    params.set('cake_type', document.getElementById('cake-type').options[document.getElementById('cake-type').selectedIndex].text);
    params.set('cake_size', document.getElementById('cake-size').options[document.getElementById('cake-size').selectedIndex].text);
    params.set('cake_shape', document.getElementById('cake-shape').value);
    params.set('cake_tiers', document.getElementById('cake-tiers')?.value || "1");
    params.set('custom_message', document.getElementById('custom-message').value.trim() || "None");
    params.set('extra_frosting', document.getElementById('extra-frosting').checked ? 'Yes (+R20)' : 'No');

    const cupcakes = parseInt(document.getElementById('cupcake-add').value);
    params.set('cupcakes', cupcakes);
    params.set('cupcake_price', cupcakePrices[cupcakes]);

    const typeValue = document.getElementById('cake-type').value;
    const sizeValue = document.getElementById('cake-size').value;
    const shapeValue = document.getElementById('cake-shape').value;
    const tiersValue = (shapeValue === "Round") ? parseInt(document.getElementById('cake-tiers').value || 1) : 1;
    const total = (prices[typeValue] || 0) + sizeBonus[sizeValue] + (document.getElementById('extra-frosting').checked ? 20 : 0) + tierPrices[tiersValue] + cupcakePrices[cupcakes];
    params.set('total', 'R' + total);

    const img = document.getElementById('image-preview');
    if (img.src && img.style.display === 'block') {
      params.set('image_base64', img.src);
    }

    window.location.href = 'confem.html?' + params.toString();
  });

  const today = new Date();
  today.setDate(today.getDate() + 2);
  document.getElementById('delivery-date').min = today.toISOString().split('T')[0];

  updateTotal();
</script>

</body>
</html>